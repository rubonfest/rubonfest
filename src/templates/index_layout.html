{% extends 'base.html' %}

{% from 'macros/news.html' import news_block %}

{% from 'macros/'~this.alt~'/information.html' import partners_block, partners_mobile_block %}
{% from 'macros/information.html' import contacts_block %}
{% from 'macros/previous.html' import previous_block %}

{% block stylesheets %}
  {{ super() }}
  <link rel="stylesheet" href="{{ '/static/css/animate.css/animate.min.css'|url }}" />
  <link rel="stylesheet" href="{{ '/static/js/flexslider/flexslider.css'|url }}" />
{% endblock stylesheets %}

{% block content %}
  <section id="information" class="side-borders">
    <div class="container">
      <div class="row">
        <div class="one-half column">
          <div id="dates">
            <div id="year">
              {{ this.days }}
              {{ this.month }}<br />
            </div>
            <div id="days">
              {{ this.year }}
            </div>
          </div>
          <h1>{{ this.title }}</h1>
          <div id="intro">{{ this.body }}</div>
          <div id="video">
            <iframe width="100%" height="300px" src="{{ this.video }}" frameborder="0" allowfullscreen></iframe>
          </div>
        </div>
        <div class="one-half column">
          {{ partners_block() }}
          {% set contacts = site.get('/contacts', alt=this.alt) %}
          {{ contacts_block(contacts) }}
        </div>
      </div>
    </div>
  </section>
  <section id="photo-gap-1">
    <div id="mountain" class="show-desktop show-tablet">
      <img src="{{ '/static/images/mount.jpg'|url }}" />
    </div>
    <div class="triangle-top gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-top.png'|url }}" />
      <img class="show-tablet show-desktop" src="{{ '/static/images/triangle-double-top.png'|url }}" />
    </div>
    <div class="triangle-bot gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-bot.png'|url }}" />
      <img class="show-tablet show-desktop" src="{{ '/static/images/triangle-double-bot.png'|url }}" />
    </div>
  </section>
  <section id="musical-guests">
    {% set musicians = site.get('festival-guests/musicians', alt=this.alt) %}
    {% set row_index = 0 %}
    {% for guest in musicians.children.all() %}
      {% if loop.index % 2 == 0 %}
        {% set row_index = row_index + 1 %}
      {% endif %}
      <div {% if loop.first %}id="main-musical-guest"{% endif %} 
        class="musical-guest guest-{% if loop.index0 % 2 %}left{% else %}right{% endif %} guest-row-{{ row_index }} animated">
        <img src="{{ guest.attachments.get('logo.png')|url }}" />
      </div>
    {% endfor %}
    <h2><a href="#">{{ musicians.name }}</a></h2>
  </section>
  <section id="features">
    <div class="triangle-top gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-top.png'|url }}" />
      <img class="show-tablet show-desktop" src="{{ '/static/images/triangle-double-top.png'|url }}" />
    </div>
    <div class="flexslider">
      <ul class="slides">
        <li>
          <img src="{{ '/static/images/photo-gap-1.jpg'|url }}" />
        </li>
        <li>
          <img src="{{ '/static/images/photo-gap-2.jpg'|url }}" />
        </li>
      </ul>
    </div>
    <div class="triangle-bot gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-bot.png'|url }}" />
      <img class="show-tablet show-desktop" src="{{ '/static/images/triangle-double-bot.png'|url }}" />
    </div>
  </section>
  <section id="other-guests">
    {% set other_guests = site.get('festival-guests/participants', alt=this.alt) %}
    {% set row_index = 0 %}
    {% for guest in other_guests.children.all() %}
      {% if not loop.first and loop.index % 2 %}
        {% set row_index = row_index + 1 %}
      {% endif %}
    <div class="other-guest guest-{% if loop.index0 % 2 %}right{% else %}left{% endif %} guest-row-{{ row_index }} animated">
      <img src="{{ guest.attachments.get('logo.png')|url }}" />
    </div>
    {% endfor %}
    <h2><a href="#">{{ other_guests.name }}</a></h2>
  </section>
  <section id="photo-gap-2">
    <div class="triangle-top gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-top.png'|url }}" />
      <img class="show-tablet show-desktop" src="{{ '/static/images/triangle-double-top.png'|url }}" />
    </div>
    {% set history = site.get('festival-history', alt=this.alt) %}
    {{ previous_block(history) }}
    <div class="triangle-bot gap-triangle">
      <img class="show-mobile" src="{{ '/static/images/triangle-bot.png'|url }}" />
    </div>
  </section>
  <section id="news" class="side-borders">
    {% set news = site.get('festival-news', alt=this.alt) %}
    <div class="container">
      <div class="row">
        <div class="column">
          {{ news_block(news) }}
        </div>
      </div>
    </div>
  </section>
  <section id="photo-gap-3">
    <div class="triangle-top gap-triangle">
      <img src="{{ '/static/images/triangle-top-border.png'|url }}" />
    </div>
    <div class="triangle-bot gap-triangle show-mobile">
      <img src="{{ '/static/images/triangle-bot-border.png'|url }}" />
    </div>
  </section>
  <section id="rest-information" class="show-mobile">
    <div class="container">
      <div class="row">
        <div class="column">
          {{ partners_mobile_block() }}
        </div>
      </div>
    </div>
  </section>
{% endblock content %}

{% block javascripts %}
  {{ super() }}
  <script src="{{ '/static/js/contacts-wrap.js'|url }}"></script>
  <script src="{{ '/static/js/flexslider/jquery.flexslider-min.js'|url }}"></script>
{% endblock javascripts %}

